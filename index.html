<!DOCTYPE html>
<html>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
    crossorigin="anonymous"></script>
<script src="//d3js.org/d3.v4.min.js"></script>
<script src="/js/filter.js"></script>
<script src="/js/blooming-menu.min.js"></script>
<script src="/js/jsplumb.js "></script>
<script src="/js/utilities.js"></script>
<script src="/js/landscape.js"></script>
<script src="/js/global_values.js"></script>



<head>


    <link rel="stylesheet" type="text/css" href="./css/bootstrap.css" media="screen,projection,print">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Trirong:100,200" media="screen,projection,print">
    <link rel="stylesheet" type="text/css" href="./css/buttons.css" media="screen,projection,print">
    <link rel="stylesheet" type="text/css" href="./css/open-iconic-bootstrap.css" media="screen,projection,print">
    <link rel="stylesheet" type="text/css" href="./css/search.css" media="screen,projection,print">
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" media="screen,projection,print">
    <link rel="stylesheet" type="text/css" href="./css/styles.css" media="screen,projection,print">

</head>

<body>


    <script>






        $.ajax({
            url: '/database/autocomplete_index.json',
            async: false,
            dataType: 'json',
            success: function (json) {

                allKeyWords = json;
            }
        });

        d3.json("./database/cloud_services_nested_mc.json", function (d) {
            data = d;
            createLandscape(d);
        });


        $.getJSON("/database/search_index.json", function (json) {
            searchIndex = json;
            d3.select("#resultCount").html(searchIndex.length);

        });

        var menu = new BloomingMenu({
            itemsNum: 2,
            radius: 30,
            startAngle: 0,
            endAngle: 180
        });
        menu.render();


        menuNode = d3.selectAll(".blooming-menu__container");

        menuNode.style("z-index", "3");
        menuNode
            .on("click", function () {
                menuCloseAdapter();
            });


        tooltip = d3.select("body").append("div").attr("class", "toolTip");
        createDetailsView();

        d3.select("#menu_button_0").on("click", showDependenciesPlumb);
        d3.select("#menu_button_1").on("click", showDetails);




        d3.select("body")
            .on("keydown", function () {
                if (d3.event.key == "Escape") {
                    resetView();
                }
            })


        /**
         * "If you are writing code and you are not sure of the data you are using there is something wrong in the design of the whole project."
         * -- Blindman67
         * https://stackoverflow.com/questions/42252538/deep-search-json-object
         */
        $(window).ready(function () {
            var windowWidth = $(window).width();
            d3.select("#searchForm").style("width", windowWidth * 0.5 + "px");
           // zoomReset();
            //adjustContainers();
            var zoomIndicator = document.getElementById("zoomIndicator");
            zoomIndicator.setAttribute("min", Math.floor(zoomMin * 100));
            zoomIndicator.setAttribute("max", Math.floor(zoomMax * 100));
            var zoomFIndicator = document.getElementById("zoomFIndicator");
            zoomFIndicator.setAttribute("min", Math.floor(zoomMin * 100));
            zoomFIndicator.setAttribute("max", Math.floor(zoomMax * 100));

        });
        window.addEventListener("resize", adjustContainers);


    </script>


    <div id="dpi" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>
    <div id="topnav" class="topnav">



        <!--        <div class="pName">GRIDSCAPE</div>-->
        <div class="toolbox">
            <!-- Search design based on https://bootsnipp.com/snippets/exqd3 by Siddharth Panchal -->
            <form id="searchForm" style="overflow: hidden">
                <input id="form-tags-1" name="tags-1" type="text">
            </form>
            <button onclick="search()" type="button"><span class="oi oi-magnifying-glass"></span></button>
        </div>

        <div class="toolbox" id="resCountContainer" style="font-size: 16px; padding: 0; margin: 0">
            <div>Matches:</div>
            <div id=resultCount>0</div>
        </div>

        <div class="toolbox">
            <button id="zoomOutButton" onclick="zoom(zoomFactor-0.1)"><span class="oi oi-zoom-out"></button>

            <form id="zoomForm" style="overflow: hidden" onsubmit="return false">
                <input id="zoomIndicator" type="number" value="100" onchange="zoom(value/100)">
            </form>
            <button id="zoomInButton" onclick="zoom(zoomFactor+0.1)"><span class="oi oi-zoom-in"></span></button>
            <button id="zoomResetButton" onclick="zoomReset()" style="margin: 0px 5px 0px 5px;">
                <span class="bbg" style="background: url(./img/noun_Reset_Zoom_54041.svg) no-repeat top left;"></span>
            </button>

            <button id="zoomFOutButton" onclick="zoomFont(fontZoomFactor-0.1)">
                <span class="bbg" style="background: url(./img/noun_Zoom_Out_45291.svg) no-repeat top left; height: 25px; width: 25px; top: 8px">
            </button>

            <form id="zoomForm" style="overflow: hidden" onsubmit="return false">
                <input id="zoomFIndicator" type="number" value="100" onchange="zoomFont(value/100)">
            </form>
            <button id="zoomFInButton" onclick="zoomFont(fontZoomFactor+0.1)">
                <span class="bbg" style="background: url(./img/noun_zoom-in_45294.svg) no-repeat top left; height: 25px; width: 25px; top: 8px">
            </button>
        </div>





    </div>


    <div class="footer" style="padding-left: 12%">
        <div class="row" style="border: 0px">
            <div class="col" style="border: 0px">
                <button class="footer-button" onclick=""><span>Help</span></button>
            </div>

            <div class="col" style="border: 0px">
                <button class="footer-button" onclick="generatePDF()"><span>Print</span></button>
            </div>

            <div class="col" style="border: 0px">
                <form method="get" action="/offline/landscape_latest.pdf">
                    <button type="submit">PDF</button>
                </form>

            </div>

            <div class="col" style="border: 0px">
                <button class="footer-button" onclick=""><span>Feedback</span></button>
            </div>

            <div class="col" style="border: 0px">
                <button class="footer-button" onclick=""><span>Impress</span></button>
            </div>
        </div>


    </div>


    <!-- PRINT SECTION -->
    <div id="printHeader">
        <div class="row" style="border: 0px">
            <div class="col" style="border: 0px">
                <span id="headerText" style="font-size: 10mm">GRIDSCAPE</span>
            </div>
        </div>


    </div>

</body>


</html>